# ‚úÖ –†–ï–®–ï–ù–ò–ï –ù–ê–ô–î–ï–ù–û: –ü–∞—Ä—Å–∏–Ω–≥ NBT Lore –≤ OpenComputers

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü–æ—Å–ª–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenComputers –Ω–∞–π–¥–µ–Ω –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω—ã—Ö NBT –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–∑ ME —Å–∏—Å—Ç–µ–º—ã Applied Energistics 2.

## üîë –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ

**ME Controller API** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ `store()`:
```lua
store([filter:table,] [dbAddress:string,] [startSlot:number,] [count:number]): bool
```

–ö–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ ME —Å–µ—Ç–∏ –≤ **Database –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**.

**Database API** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ `get()`:
```lua
get(slot:number):table
```

–ö–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–ü–û–õ–ù–û–ï** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤–∫–ª—é—á–∞—è **NBT —Ç–µ–≥–∏**!

## üéØ –†–µ—à–µ–Ω–∏–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. ME Controller (–ø–æ–¥–∫–ª—é—á–µ–Ω –∫ ME —Å–µ—Ç–∏)
2. **Database Upgrade** (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Adapter)
3. Transposer (x2 –¥–ª—è —Å—É–Ω–¥—É–∫–æ–≤)
4. Computer (Tier 2+)

### –ê–ª–≥–æ—Ä–∏—Ç–º:
```lua
-- 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–±–µ–∑ NBT)
local items = me.getItemsInNetwork()

-- 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ —Å hasTag=true:
for _, item in ipairs(items) do
    if item.hasTag then
        -- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Database
        local success = me.store(
            {name = item.name, damage = item.damage},
            database.address,
            1,  -- —Å–ª–æ—Ç
            1   -- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        )
        
        if success then
            -- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ NBT –¥–∞–Ω–Ω—ã–µ
            local fullData = database.get(1)
            
            -- –ü–∞—Ä—Å–∏—Ç—å Lore
            if fullData.tag and fullData.tag.display and fullData.tag.display.Lore then
                for _, line in ipairs(fullData.tag.display.Lore) do
                    local price = line:match("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:%s*([%d%.]+)%$")
                    if price then
                        -- –¶–µ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞!
                        print("–¶–µ–Ω–∞: " .. price)
                    end
                end
            end
            
            -- –û—á–∏—Å—Ç–∏—Ç—å —Å–ª–æ—Ç
            database.clear(1)
        end
    end
end
```

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `price-parser.lua` (–º–æ–¥—É–ª—å –ø–∞—Ä—Å–∏–Ω–≥–∞)
- –§—É–Ω–∫—Ü–∏—è `getPriceForItem(me, db, itemName, damage, slot)` - –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
- –§—É–Ω–∫—Ü–∏—è `getPricesForItems(me, db, items)` - batch –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 6 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ü–µ–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ Database —Å–ª–æ—Ç–æ–≤

### 2. `test-nbt-via-database.lua` (–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Database
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç store() –º–µ—Ç–æ–¥
- –í—ã–≤–æ–¥–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É NBT
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ Lore

### 3. `shop.lua` (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç `price-parser.lua` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Database –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –ü–∞—Ä—Å–∏—Ç NBT –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å hasTag=true
- Fallback –Ω–∞ config.lua –µ—Å–ª–∏ NBT –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Å–∫–æ–ª—å–∫–æ –∏–∑ NBT, —Å–∫–æ–ª—å–∫–æ –∏–∑ config)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ NBT –≤ Database:
```lua
{
    name = "minecraft:diamond",
    label = "Diamond",
    damage = 0,
    maxSize = 64,
    tag = {              -- ‚Üê –ö–õ–Æ–ß–ï–í–û–ï –ü–û–õ–ï!
        display = {
            Lore = {
                "¬ß7–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: 100.0$",
                "¬ß9–†–µ–¥–∫–∏–π —Ä–µ—Å—É—Ä—Å"
            },
            Name = "¬ßb–î–∏–∞–º–æ–Ω–¥"
        }
    }
}
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ü–µ–Ω:
- ‚úÖ `–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: 15.0$`
- ‚úÖ `–¶–µ–Ω–∞: 15.0$`
- ‚úÖ `Price: 15.0$`
- ‚úÖ `–°—Ç–æ–∏–º–æ—Å—Ç—å: 15.0$`
- ‚úÖ `15.0$`
- ‚úÖ `15$`

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** ~0.05—Å –Ω–∞ 10 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å NBT
- **–ü–∞–º—è—Ç—å:** Database —Ö—Ä–∞–Ω–∏—Ç 1 –ø—Ä–µ–¥–º–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ (–∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞)
- **CPU:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–ø–∞—Ä—Å–∏–Ω–≥ —Ç–æ–ª—å–∫–æ hasTag=true)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:
1. [OC - Applied Energistics](https://ocdoc.cil.li/component:applied_energistics)
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `store()` –º–µ—Ç–æ–¥–∞
   
2. [OC - Database Component](https://ocdoc.cil.li/component:database)
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `get()` –º–µ—Ç–æ–¥–∞
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å NBT

3. [GitHub Issue #649](https://github.com/MightyPirates/OpenComputers/issues/649)
   - –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ inventory_controller.getStackInSlot() —Å NBT

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –≥–∞–π–¥—ã:
1. `NBT_PARSING_SOLUTION.md` - –ø–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
2. `QUICK_NBT_GUIDE.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç
3. `README.md` - –æ–±–Ω–æ–≤–ª—ë–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ NBT –ø–∞—Ä—Å–∏–Ω–≥–µ

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API
2. **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏** - NBT –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - NBT –ø–∞—Ä—Å–∏–Ω–≥ + config.lua fallback
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Ü–µ–Ω—ã –±–µ—Ä—É—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ Database

## ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –¢—Ä–µ–±—É–µ—Ç—Å—è Database Upgrade (Tier 3)
2. –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å `hasTag=true`
3. –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–Ω–µ–∏–∑–±–µ–∂–Ω–∞)
4. –¶–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ Lore –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üéâ –ò—Ç–æ–≥

**–ü–ê–†–°–ò–ù–ì NBT LORE –í–û–ó–ú–û–ñ–ï–ù –ò –†–ê–ë–û–¢–ê–ï–¢!**

–ú–µ—Ç–æ–¥ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –º–æ–¥—É–ª–µ `price-parser.lua`.

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞—Ç—å —Ü–µ–Ω—ã –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Database –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

---

## üîß –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Database Upgrade –≤ Adapter
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `price-parser.lua` –≤ `/home/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./test-nbt-via-database.lua` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./shop.lua` –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç —Ü–µ–Ω—ã –∏–∑ Lore.

---

**–î–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è:** 29 —è–Ω–≤–∞—Ä—è 2026
**–ú–µ—Ç–æ–¥:** –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenComputers
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
